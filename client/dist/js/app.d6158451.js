(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,h=[];d<s.length;d++)o=s[d],r[o]&&h.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function o(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d22d746":"f4590179"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise(function(e,n){a=r[t]=[e,n]});e.push(a[2]=n);var i,l=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=o(t),i=function(e){c.onerror=c.onload=null,clearTimeout(d);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,a[1](o)}r[t]=void 0}};var d=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,l.appendChild(c)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1068:function(t,e,a){"use strict";var n=a("dd4f"),r=a.n(n);r.a},2856:function(t,e,a){},3499:function(t,e,a){t.exports=a.p+"img/dropdown-arrow.be850da5.svg"},"3f49":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=a("5c96"),i=a.n(r),o=(a("0fae"),a("1f54"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-container",{staticClass:"yuchang-main"},[n("el-aside",{attrs:{width:"65px"}},[n("div",{staticClass:"yuchang-logo-menu"},[n("img",{staticClass:"yuchang-middle",attrs:{src:a("cf05"),width:"36",height:"36"}})]),n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-4-1",collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航一")])]),n("el-menu-item-group",[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("分组一")]),n("el-menu-item",{attrs:{index:"1-1"}},[t._v("选项1")]),n("el-menu-item",{attrs:{index:"1-2"}},[t._v("选项2")])],1),n("el-menu-item-group",{attrs:{title:"分组2"}},[n("el-menu-item",{attrs:{index:"1-3"}},[t._v("选项3")])],1),n("el-submenu",{attrs:{index:"1-4"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("选项4")]),n("el-menu-item",{attrs:{index:"1-4-1"}},[t._v("选项1")])],1)],2),n("el-menu-item",{attrs:{index:"2"}},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航二")])]),n("el-menu-item",{attrs:{index:"3",disabled:""}},[n("i",{staticClass:"el-icon-document"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航三")])]),n("el-menu-item",{attrs:{index:"4"}},[n("i",{staticClass:"el-icon-setting"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航四")])])],1)],1),n("el-container",[n("el-header",[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"1"}},[t._v("模型预览")]),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("我的工作台")]),n("el-menu-item",{attrs:{index:"2-1"}},[t._v("选项1")]),n("el-menu-item",{attrs:{index:"2-2"}},[t._v("选项2")]),n("el-menu-item",{attrs:{index:"2-3"}},[t._v("选项3")]),n("el-submenu",{attrs:{index:"2-4"}},[n("template",{slot:"title"},[t._v("选项4")]),n("el-menu-item",{attrs:{index:"2-4-1"}},[t._v("选项1")]),n("el-menu-item",{attrs:{index:"2-4-2"}},[t._v("选项2")]),n("el-menu-item",{attrs:{index:"2-4-3"}},[t._v("选项3")])],2)],2),n("el-menu-item",{attrs:{index:"3"}},[t._v("模型关系网络")]),n("el-menu-item",{attrs:{index:"4"}},[t._v("可视化脚本")])],1)],1),n("el-main",[n("router-view")],1),n("el-footer",[n("h4",[t._v("@2018 Unique 版权所有")])])],1)],1)],1)}),s=[],l=a("bbbc"),c={components:{ElContainer:l["a"]},data:function(){return{activeIndex:"1",isCollapse:!0}},methods:{handleSelect:function(t,e){1==t?this.$router.push({name:"home"}):4==t?this.$router.push({name:"scripteditor"}):3==t&&this.$router.push({name:"nomview"}),console.log(t,e)},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},d=c,u=(a("5c0b"),a("2877")),h=Object(u["a"])(d,o,s,!1,null,null,null);h.options.__file="App.vue";var f=h.exports,p=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home",staticStyle:{position:"relative"},attrs:{id:t.id}},[a("div",{staticClass:"container"})])},m=[],y=a("1157"),v=a.n(y),b=a("5a89"),x=a("bd2e"),k=a.n(x),w=a("6397"),_=a.n(w),C=(new b["Scene"],{name:"home",data:function(){return{id:"home"}},components:{},mounted:function(){var t,e,a,n,r,i,o=this,s=new b["Clock"],l=v()(".container"),c=function(){var t=v()(".el-main");o.width=t[0].clientWidth,o.height=t[0].clientHeight,n.setSize(o.width,o.height)};n=new b["WebGLRenderer"]({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),c(),n.gammaOutput=!0,n.gammaFactor=2.2,l.append(n.domElement),t=new b["Scene"],t.background=new b["Color"](12575709),e=new b["PerspectiveCamera"](40,o.width/o.height,1,1e3),e.position.set(8,6,-8),i=new _.a(e,n.domElement),i.target.set(0,.5,0),i.enablePan=!1,t.add(new b["AmbientLight"](4210752)),a=new b["PointLight"](16777215,1),a.position.copy(e.position),t.add(a);var d=new k.a;function u(){requestAnimationFrame(u);var a=s.getDelta();r.update(a),i.update(a),n.render(t,e)}d.load("models/gltf/qtAnimation.glb",function(e){var a=e.scene;a.position.set(0,0,0),a.scale.set(.05,.05,.05),t.add(a),r=new b["AnimationMixer"](a),console.log(e.animations.length),r.clipAction(e.animations[0]).play(),u()},void 0,function(t){console.error(t)}),window.onresize=function(){c(),e.aspect=o.width/o.height,e.updateProjectionMatrix()}}}),B=C,j=(a("cccb"),Object(u["a"])(B,g,m,!1,null,null,null));j.options.__file="Home.vue";var $=j.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nom",staticStyle:{position:"relative"},attrs:{id:t.id}},[n("svg",{staticClass:"canvas",attrs:{width:"800",height:"600"}},[n("text",{staticClass:"blocklyText",attrs:{id:"info",y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"8",transform:"translate(128, 24) "}},[t._v("X: "+t._s(t.location.x)+" Y: "+t._s(t.location.y)+"\n        ")]),n("g",{staticClass:"blocklyZoom",attrs:{transform:"translate(20,20)"}},[n("image",{attrs:{width:"36",height:"36",y:"44","xlink:href":a("9f83")}}),n("image",{attrs:{width:"36",height:"36",y:"0","xlink:href":a("8a0e")}}),n("image",{attrs:{width:"36",height:"36",y:"88","xlink:href":a("d36d")}}),n("image",{attrs:{width:"36",height:"36",y:"132","xlink:href":a("d36d")}}),n("image",{attrs:{width:"36",height:"36",y:"176","xlink:href":a("d36d")}})])])])},H=[],P=a("a322"),S=(a("7f7f"),a("ac6a"),a("c5f6"),a("bc3a")),z=a.n(S),W=a("5698"),N={x:0,y:0},F=!1,M="http://localhost:3030/api/v1/test/",E=z.a.create({baseURL:M,timeout:1e3}),T={name:"nomview",data:function(){return{id:"nom",location:{x:0,y:0}}},components:{},created:function(){},mounted:function(){var t=this,e=v()(".canvas"),a=W["k"](t.$el).select(".canvas"),n=function(){var e=v()(".el-main");t.width=e[0].clientWidth,t.height=e[0].clientHeight,a.attr("width",t.width).attr("height",t.height)};window.onresize=function(){n()},n();var r={x:0,y:0},i=a.currentScale?a.currentScale:1,o=v()(".blocklyZoom image"),s=1.1;function l(){W["l"](".workspace").remove()}o.each(function(t,e){v()(this).mousedown(function(){if(0==t)i/=s;else{if(1!=t)return 2==t?(i=1,r.x=0,r.y=0,void v()(".workspace").each(function(){this.getCTM();v()(this).attr("transform","translate(0,0) scale(1.0)")})):3==t?void l():(l(),r.x=0,r.y=0,void M($));i*=s}v()(".workspace").each(function(){var t=this.getCTM();r.x=Number(t.e),r.y=Number(t.f),v()(this).attr("transform","translate("+r.x+","+r.y+") scale("+i+")")})})}),a.on("mousedown",function(){return N.x=event.pageX,N.y=event.pageY,F=!0,!1}).on("mousemove",function(){var a=e.offset().left,n=e.offset().top;if(t.location.x=event.pageX-a,t.location.y=event.pageY-n,F){var o=event.pageX-N.x,s=event.pageY-N.y;N.x=event.pageX,N.y=event.pageY,v()(".workspace").each(function(){var t=this.getCTM();r.x=Number(t.e)+o,r.y=Number(t.f)+s,v()(this).attr("transform","translate("+r.x+","+r.y+") scale("+i+")")})}}).on("mouseup",function(t){F=!1});var c=a.append("defs"),d=c.append("marker").attr("id","arrow").attr("markerUnits","strokeWidth").attr("markerWidth","12").attr("markerHeight","12").attr("viewBox","0 0 12 12").attr("refX","8").attr("refY","6").attr("orient","auto"),u="M2,2 L10,6 L2,10 L2,2";d.append("path").attr("d",u).attr("fill","#000");var h=c.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id","solid");h.append("feFlood").attr("flood-color","green"),h.append("feComposite").attr("in","SourceGraphic");var f=null,p=null;W["i"](W["j"]);function g(t){var e="";switch(t){case 1:e="模型";break;case 2:e="接口";break;case 3:e="输入";break;case 4:e="输出";break;case 5:e="集合";break;case 6:e="版本";break;default:e="未知"}return e}function m(t){var e={};return t.forEach(function(t){e["_"+t.id]=t}),e}function y(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function b(t,e,a,n){return Math.atan2(e-n,t-a)}function x(t){W["b"].active||p.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function k(t){t.fx=W["b"].x,t.fy=W["b"].y}function w(t){W["b"].active||p.alphaTarget(0),t.fx=null,t.fy=null}function _(t,e){if(1==t){var a=e&&e>1?20+5*e:20;return a+4}var n=e&&e>1?8*e:16;return 1.5*n/2}var C=null,B=null,j=null,$=null,O=null,H=null,S=null;function M(e){f=a.append("g").attr("class","workspace").attr("transform","translate("+r.x+","+r.y+") scale("+i+")"),p=W["g"]().force("link",W["e"]().id(function(t){return t.id})).force("charge",W["f"]()).force("collide",W["d"](100)).force("center",W["c"](t.width/2,t.height/2));var n=f.append("g").attr("class","links").selectAll("path").data(e.links).enter().append("path").attr("stroke",function(t){return t.source>100?"#f66":"#66f"}).attr("stroke-width",function(t){return 1}).attr("marker-end","url(#arrow)"),o=f.append("g").attr("class","nodes").selectAll("g").data(e.nodes).enter().append("g").on("mouseover",function(t){W["k"](this).selectAll("circle").classed("selected",!0),W["k"](this).selectAll("rect").classed("selected",!0)}).on("mouseout",function(t){W["k"](this).selectAll("circle").classed("selected",!1),W["k"](this).selectAll("rect").classed("selected",!1)}).on("dblclick",function(t){O=1==t.group?T(t.id):A(t.id),I(O)}),s=o.filter(function(t){return 1==t.group}),l=o.filter(function(t){return 2==t.group});s.append("circle").attr("r",function(t){return t.value&&t.value>1?20+5*t.value:20}).call(W["a"]().on("start",x).on("drag",k).on("end",w)),l.append("rect").attr("x",function(t){return t.value&&t.value>1?4*-t.value:-8}).attr("y",function(t){return t.value&&t.value>1?4*-t.value:-8}).attr("width",function(t){return t.value&&t.value>1?8*t.value:16}).attr("height",function(t){return t.value&&t.value>1?8*t.value:16}).call(W["a"]().on("start",x).on("drag",k).on("end",w)),o.append("text").text(function(t){return t.name}).attr("text-anchor",function(t){return 1==t.group?"middle":"start"}).attr("x",function(t){return 1==t.group?0:10}).attr("y",function(t){return 5});function c(){n.attr("d",function(t){var e=b(t.source.x,t.source.y,t.target.x,t.target.y),a=_(t.source.group,t.source.value),n=[t.source.x-a*Math.cos(e),t.source.y-a*Math.sin(e)],r=_(t.target.group,t.target.value),i=[t.target.x+r*Math.cos(e),t.target.y+r*Math.sin(e)];return"M "+n+" L "+i}),o.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}o.append("title").text(function(t){return t.id}),p.nodes(e.nodes).on("tick",c),p.force("link").links(e.links)}function T(t){var e=H,a=B["_"+t];if(!a)return null;a.name;for(var n in a.inports);for(var n in a.outports);return e}function A(t){var e,a=S,n=j["_"+t];if(!n)return null;e={id:0},Object(P["a"])(e,"id",t),Object(P["a"])(e,"name",n.name),Object(P["a"])(e,"parent",""),Object(P["a"])(e,"group",2);return a}function I(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(),f=a.append("g").attr("class","workspace").attr("transform",(n?"translate("+r.x+","+r.y+") ":"translate("+t.width/2+","+t.height/2+")")+"scale("+i+")");var o=W["m"]().id(function(t){return t.uid}).parentId(function(t){return t.parent})(e.nodes),s=W["n"]().size([2*Math.PI,300]).separation(function(t,e){return t.parent==e.parent?1:2}),c=s(o),d=f.selectAll(".link").data(c.links()).enter().append("path").attr("class","link"),u=d.filter(function(t){return 0==t.source.id}),h=d.filter(function(t){return 0!=t.source.id});u.attr("d",function(t){return"M 0,0 L "+y(t.target.x,t.target.y)}),h.attr("d",W["h"]().angle(function(t){return t.x}).radius(function(t){return t.y}));var p=f.selectAll(".node").data(c.descendants()).enter().append("g").attr("class",function(t){var e="node ",a=t.data.group;return 1==a?e+="node--model":2==a?e+="node--interface":a<5?e+="node--port":5==a?e+="node--group":6==a&&(e+="node--version"),e}).attr("transform",function(t){return"translate("+y(t.x,t.y)+")"}).on("mouseover",function(t){W["k"](this).selectAll("circle").classed("selected",!0),W["k"](this).selectAll("rect").classed("selected",!0)}).on("mouseout",function(t){W["k"](this).selectAll("circle").classed("selected",!1),W["k"](this).selectAll("rect").classed("selected",!1)}).on("click",function(t){if(0!=t.id&&5==t.data.group){W["k"](this);var e="_"+t.id,a=[];for(var n in O.nodes.forEach(function(t){t["groupid"]||a.push(t)}),O.groups)n!=e&&a.push(O.groups[n]);var r=O.models[e];r&&r.forEach(function(t){a.push(t)}),O.nodes=a,I(O,!0)}}).on("dblclick",function(t){0!=t.id&&(t.data.group>=5||(1==t.data.group?O=T(t.data.id):t.data.group<5&&(O=A(t.data.id)),I(O,!0)))}),m=p.filter(function(t){return 0!=t.id&&(2==t.data.group||3==t.data.group||4==t.data.group)}),v=p.filter(function(t){return 0==t.id||1==t.data.group||t.data.group>=5});v.append("circle").attr("r",function(t){return 0==t.id?50:1==t.data.group||5==t.data.group?25:5}),m.append("rect").attr("x",function(t){return-5}).attr("y",function(t){return-5}).attr("width",function(t){return 10}).attr("height",function(t){return 10}),p.append("text").attr("dy","-0.31em").attr("x",function(t){return 0==t.id||1==t.data.group||5==t.data.group?0:t.x<Math.PI?6:-6}).attr("text-anchor",function(t){return 0==t.id||1==t.data.group||5==t.data.group?"middle":t.x<Math.PI?"start":"end"}).attr("transform",function(t){return 0==t.id||1==t.data.group||5==t.data.group?"":"rotate("+180*(t.x<Math.PI?t.x-Math.PI/2:t.x+Math.PI/2)/Math.PI+")"}).text(function(t){return 5==t.data.group?"":g(t.data.group)}),p.append("text").attr("dy",function(t){return 5==t.data.group?"0.31em":"1.0em"}).attr("x",function(t){return 0==t.id||1==t.data.group||5==t.data.group?0:t.x<Math.PI?6:-6}).attr("text-anchor",function(t){return 0==t.id||1==t.data.group||5==t.data.group?"middle":t.x<Math.PI?"start":"end"}).attr("transform",function(t){return 0==t.id||1==t.data.group||5==t.data.group?"":"rotate("+180*(t.x<Math.PI?t.x-Math.PI/2:t.x+Math.PI/2)/Math.PI+")"}).text(function(t){return t.data.name})}z.a.all([E.get("/getnom"),E.get("/getnetwork"),E.get("/getmodeltree"),E.get("/getinterfacetree")]).then(z.a.spread(function(t,e,a,n){C=t.data,B=m(C.nodes),j=m(C.interfaces),$=e.data,H=a.data,S=n.data,M($)})).catch(function(t){console.log(t)})}},A=T,I=(a("ef37"),Object(u["a"])(A,O,H,!1,null,null,null));I.options.__file="NomView.vue";var D=I.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Scratch",{attrs:{flex:"1"}})],1)},G=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scratch",staticStyle:{position:"relative"},attrs:{id:t.id}},[n("svg",{staticClass:"ycBlockSvg",attrs:{width:t.size.width,height:t.size.height,"data-virtual-width":t.size.virtualWidth,"data-virtual-height":t.size.virtualHeight,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("pattern",{attrs:{id:"ycBlockGridPattern",patternUnits:"userSpaceOnUse",width:"38.879999999999995",height:"38.879999999999995",x:"207.0918124072559",y:"-1.856000000001302"}},[n("line",{attrs:{stroke:"#ddd","stroke-width":"0.972",x1:"18.954",y1:"19.926",x2:"20.898",y2:"19.926"}}),n("line",{attrs:{stroke:"#ddd","stroke-width":"0.972",x1:"19.926",y1:"18.954",x2:"19.926",y2:"20.898"}})]),n("filter",{attrs:{id:"ycBlockReplacementGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"}},[n("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"2"}}),n("feComponentTransfer",{attrs:{result:"outBlur"}},[n("feFuncA",{attrs:{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"}})],1),n("feFlood",{attrs:{"flood-color":"#FFFFFF","flood-opacity":"1",result:"outColor"}}),n("feComposite",{attrs:{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"}}),n("feComposite",{attrs:{in:"SourceGraphic",in2:"outGlow",operator:"over"}})],1),n("filter",{attrs:{id:"ycBlockStackGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"}},[n("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"4"}}),n("feComponentTransfer",{attrs:{result:"outBlur"}},[n("feFuncA",{attrs:{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"}})],1),n("feFlood",{attrs:{"flood-color":"#FFF200","flood-opacity":"1",result:"outColor"}}),n("feComposite",{attrs:{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"}}),n("feComposite",{attrs:{in:"SourceGraphic",in2:"outGlow",operator:"over"}})],1)]),n("g",{staticClass:"ycBlockWorkspace"},[n("rect",{staticClass:"ycBlockMainBackground",staticStyle:{fill:"url(#ycBlockGridPattern)"},attrs:{height:"100%",width:"100%"}}),n("text",{staticClass:"ycBlockText",attrs:{id:"ycBlockInfo",y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"8",transform:"translate(128, 24) "}},[t._v("X: 0  Y: 0")]),n("g",{staticClass:"ycBlockCanvas"},[n("g",{staticClass:"ycBlockDraggable",attrs:{"data-shapes":"stack","data-category":"motion",transform:"translate(0.40740740740745,80.14814814814818)"}},[n("path",{staticClass:"ycBlockPath ycBlockBackground",attrs:{stroke:"#3373CC",fill:"#4C97FF","fill-opacity":"1",d:"m 0,4 A 4,4 0 0,1 4,0 H 12 c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2 H 158 a 4,4 0 0,1 4,4 v 40  a 4,4 0 0,1 -4,4 H 48   c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 H 4 a 4,4 0 0,1 -4,-4 z"}}),n("g",{attrs:{"data-argument-type":"dropdown","data-shapes":"argument round",transform:"translate(47.99999999999996,8)"}},[n("path",{staticClass:"ycBlockPath ycBlockBackground",attrs:{stroke:"#3373CC",fill:"#4280D7","fill-opacity":"1",d:"m 0,0 m 16,0 H 90 a 16 16 0 0 1 0 32 H 16 a 16 16 0 0 1 0 -32 z"}}),n("g",{staticClass:"ycBlockEditableText",staticStyle:{cursor:"default"},attrs:{transform:"translate(8, 0) "}},[n("text",{staticClass:"ycBlockText ycBlockDropdownText",attrs:{x:"34.99998664855957",y:"18","dominant-baseline":"middle",dy:"0","text-anchor":"middle"}},[t._v("鼠标指针")]),n("image",{attrs:{height:"12px",width:"12px","xlink:href":a("3499"),transform:"translate(73.99997329711914,11)"}})])]),n("text",{staticClass:"ycBlockText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"15.999993324279785",transform:"translate(8, 24) "}},[t._v("移到")]),n("path",{staticClass:"ycBlockPath",staticStyle:{visibility:"hidden"},attrs:{d:"",fill:"#3373CC"}})]),n("g",{staticClass:"ycBlockDraggable ycBlockSelected",attrs:{"data-shapes":"stack","data-category":"motion",transform:"translate(0.33333333333337,217.03703703703707)"}},[n("path",{staticClass:"ycBlockPath ycBlockBackground",attrs:{stroke:"#3373CC",fill:"#4C97FF","fill-opacity":"1",d:"m 0,4 A 4,4 0 0,1 4,0 H 12 c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2 H 116 a 4,4 0 0,1 4,4 v 40  a 4,4 0 0,1 -4,4 H 48   c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 H 4 a 4,4 0 0,1 -4,-4 z"}}),n("g",{attrs:{"data-argument-type":"text number","data-shapes":"argument round",transform:"translate(48,8)"}},[n("path",{staticClass:"ycBlockPath ycBlockBackground",attrs:{stroke:"#3373CC",fill:"#FFFFFF","fill-opacity":"1",d:"m 0,0 m 16,0 H 24 a 16 16 0 0 1 0 32 H 16 a 16 16 0 0 1 0 -32 z"}}),n("g",{staticClass:"ycBlockEditableText",attrs:{transform:"translate(8, 0) "}},[n("text",{staticClass:"ycBlockText",attrs:{x:"12",y:"18","dominant-baseline":"middle",dy:"0","text-anchor":"middle"}},[t._v("10")])])]),n("text",{staticClass:"ycBlockText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"16",transform:"translate(8, 24) "}},[t._v("移动")]),n("text",{staticClass:"ycBlockText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"8",transform:"translate(96, 24) "}},[t._v("步")])]),n("g",{staticClass:"blocklyDraggable blocklySelected",attrs:{"data-shapes":"hat","data-category":"events",transform:"translate(134.9629629629629,60.59259259259272)"}},[n("path",{staticClass:"blocklyPath blocklyBlockBackground",attrs:{stroke:"#CC9900",fill:"#FFBF00","fill-opacity":"1",d:"m 0,0 c 25,-22 71,-22 96,0 H 115.99997043609619 a 4,4 0 0,1 4,4 v 40  a 4,4 0 0,1 -4,4 H 48   c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 H 4 a 4,4 0 0,1 -4,-4 z"}}),n("text",{staticClass:"blocklyText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"7.999996662139893",transform:"translate(8, 24) "}},[t._v("当")]),n("g",{attrs:{transform:"translate(31.999993324279785, 12) "}},[n("image",{attrs:{height:"24px",width:"24px","xlink:href":a("b13e")}})]),n("text",{staticClass:"blocklyText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"23.999988555908203",transform:"translate(63.999993324279785, 24) "}},[t._v("被点击")])]),n("g",{staticClass:"blocklyDraggable",attrs:{"data-shapes":"c-block c-1 end","data-category":"control",transform:"translate(249.037037037037,178.22222222222234)"}},[n("path",{staticClass:"blocklyPath blocklyBlockBackground",attrs:{stroke:"#CF8B17",fill:"#FFAB19","fill-opacity":"1",d:"m 0,4 A 4,4 0 0,1 4,0 H 12 c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2 H 156 a 4,4 0 0,1 4,4 v 40  a 4,4 0 0,1 -4,4 H 64 c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 h -8  a 4,4 0 0,0 -4,4 v 16 a 4,4 0 0,0 4,4 h  8 c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2 H 156 H 156 a 4,4 0 0,1 4,4 v 24  a 4,4 0 0,1 -4,4 H 4 a 4,4 0 0,1 -4,-4 z"}}),n("text",{staticClass:"blocklyText",attrs:{y:"2","text-anchor":"middle","dominant-baseline":"middle",dy:"0",x:"31.99998664855957",transform:"translate(8, 24) "}},[t._v("重复执行")]),n("g",{attrs:{transform:"translate(128, 76) "}},[n("image",{attrs:{height:"24px",width:"24px","xlink:href":a("8180")}})])])])])]),n("svg",{staticClass:"ycBlockDragSurface",staticStyle:{display:"block"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{staticClass:"ycBlockDragCanvas",attrs:{filter:"url(#ycBlockDragShadowFilter)"}}),n("defs",[n("filter",{attrs:{id:"ycBlockDragShadowFilter",height:"140%",width:"140%",y:"-20%",x:"-20%"}},[n("feGaussianBlur",{attrs:{in:"SourceAlpha",stdDeviation:"6"}}),n("feComponentTransfer",{attrs:{result:"offsetBlur"}},[n("feFuncA",{attrs:{type:"linear",slope:"0.6"}})],1),n("feComposite",{attrs:{in:"SourceGraphic",in2:"offsetBlur",operator:"over"}})],1)])]),n("svg",{staticClass:"ycBlockWsDragSurface ycBlockOverflowVisible",staticStyle:{display:"none"},attrs:{width:t.size.width,height:t.size.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg"}}),n("svg",{staticClass:"ycBlockFlyout",attrs:{width:t.flyout.width,height:t.size.height}},[n("defs",[n("clipPath",{attrs:{id:"ycBlockMenuClipPath"}},[n("rect",{attrs:{id:"ycBlockMenuClipRect",height:t.size.height,width:t.flyout.width,y:"0",x:"0"}})])]),n("path",{staticClass:"ycBlockFlyoutBackground",attrs:{d:"M 0,0 h 250 a 0 0 0 0 1 0 0 v 606 a 0 0 0 0 1 0 0 h -250 z"}}),n("g",{staticClass:"ycBlockWorkspace",attrs:{"clip-path":"url(#ycBlockMenuClipPath)"}},[n("g",{staticClass:"ycBlockCanvas",attrs:{transform:"translate(0,0) scale(0.675)"}},[n("rect",{attrs:{"fill-opacity":"0",x:"12",y:"1960",height:"56",width:"96"}})]),n("g",{staticClass:"ycBlockBubbleCanvas",attrs:{transform:"translate(0,0) scale(0.675)"}})])]),n("div",{staticClass:"ycBlockToolbox",attrs:{dir:"LTR",height:t.size.height}},[n("div",{staticClass:"ycBlockCategoryMenu"})])])},Y=[],X=(a("4917"),a("6b54"),a("6bde")),Z=(a("28a5"),Z||{});Z.global=void 0,Z.isDef=function(t){return void 0!==t},Z.isString=function(t){return"string"===typeof t},Z.isBoolean=function(t){return"boolean"===typeof t},Z.isNumber=function(t){return"number"===typeof t},Z.getObjectByName=function(t,e){for(var a=t.split("."),n=e||Z.global,r=0;r<a.length;r++)if(n=n[a[r]],!goog.isDefAndNotNull(n))return null;return n},Z.logToConsole_=function(t){Z.global.console&&Z.global.console["error"](t)},Z.nullFunction=function(){},Z.abstractMethod=function(){throw new Error("unimplemented abstract method")},Z.typeOf=function(t){var e=Object(X["a"])(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var a=Object.prototype.toString.call(t);if("[object Window]"==a)return"object";if("[object Array]"==a||"number"===typeof t.length&&"undefined"!==typeof t.splice&&"undefined"!==typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==a||"undefined"!==typeof t.call&&"undefined"!==typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"===typeof t.call)return"object";return e},Z.isNull=function(t){return null===t},Z.isDefAndNotNull=function(t){return null!=t},Z.isArray=function(t){return"array"==Z.typeOf(t)},Z.isArrayLike=function(t){var e=Z.typeOf(t);return"array"==e||"object"==e&&"number"===typeof t.length},Z.isFunction=function(t){return"function"==Z.typeOf(t)},Z.isObject=function(t){var e=Object(X["a"])(t);return"object"==e&&null!=t||"function"==e},Z.cloneObject=function(t){var e=goog.typeOf(t);if("object"==e||"array"==e){if(t.clone)return t.clone();var a="array"==e?[]:{};for(var n in t)a[n]=Z.cloneObject(t[n]);return a}return t},Z.inherits=function(t,e){function a(){}a.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.base=function(t,a,n){for(var r=new Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.prototype[a].apply(t,r)}},Z.strByteLength=function(t){var e=t.match(/[^\x00-\xff]/gi);return t.length+(null==e?0:e.length)};var V=Z,U=(a("8615"),a("a481"),a("7514"),a("dc0a")),q=a("d328"),J=a("11d9"),K=a("b8d7"),Q=(a("456d"),a("f751"),a("9393")),tt=(a("ffc1"),a("c665")),et=a("aa9a"),at=(a("8449"),a("6c7b"),a("ac4d"),a("8a81"),a("c64e")),nt=a.n(at),rt=["off","error","warn","info","log","debug"],it={};function ot(){rt.forEach(function(t){var e=rt.indexOf(t);it[t]={},rt.forEach(function(a){var n=rt.indexOf(a);n<=e&&(it[t][a]=!0)})})}ot();var st="log";function lt(t){var e=st||"log";return it[e]&&it[e][t]}var ct={setLevel:function(t){st=t||"log"},debug:function(){if(lt("debug")){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];console.debug.apply(console,e)}},log:function(){if(lt("log")){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];console.log.apply(console,e)}},info:function(){if(lt("info")){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];console.info.apply(console,e)}},warn:function(){if(lt("warn")){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];console.warn.apply(console,e)}},error:function(){if(lt("error")){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];console.error.apply(console,e)}}},dt=ct,ut=[{id:"locationx",name:"X坐标",shape:"round",category:"sensing",draggable:!0,text:"X坐标",exports:{json:function(t){return{}}}},{id:"locationy",name:"Y坐标",shape:"round",category:"sensing",draggable:!0,text:"Y坐标",exports:{json:function(t){return{}}}},{id:"origin",name:"是否在原点",shape:"boolean",category:"sensing",draggable:!0,text:"是否在原点",exports:{json:function(t){return{}}}}],ht=[];ht=ht.concat(ut);var ft={name:"变量",members:ht},pt=[{id:"insertmarker",name:"插入标记",shape:"none",category:"internal",draggable:!0,exports:{json:function(t){return{}}}}],gt=[];gt=gt.concat(pt);var mt={name:"标记",members:gt},yt=[{id:"move",shape:"slot",category:"motion",draggable:!0,display:{space:8,padding:8},sections:[{type:"text",text:"移动"},{type:"argument",datatype:"number",state:{value:1}},{type:"text",text:"步"}],exports:{json:function(t){return{}}}},{id:"steer",shape:"slot",category:"motion",draggable:!0,display:{space:8,padding:8},sections:[{type:"text",text:"转向到"},{type:"argument",datatype:"number",state:{value:1}},{type:"text",text:"度"}],exports:{json:function(t){return{}}}},{id:"movedestination",shape:"slot",category:"motion",draggable:!0,display:{space:8,padding:8},sections:[{type:"text",text:"设置航行目标为"},{type:"argument",datatype:"number",state:{value:1}},{type:"argument",datatype:"number",state:{value:1}}],exports:{json:function(t){return{}}}}],vt=[];vt=vt.concat(yt);var bt={name:"动作",members:vt},xt=[{id:"click",shape:"event",category:"event",draggable:!0,sections:[{type:"text",text:"当"},{type:"image",url:"/img/green-flag.svg",width:24,height:24},{type:"text",text:"被点击"}],exports:{json:function(t){return{}}}}],kt=[];kt=kt.concat(xt);var wt={name:"事件",members:kt},_t=[{id:"add",name:"相加",shape:"round",category:"operator",draggable:!0,display:{padding:4},sections:[{type:"argument",datatype:"number"},{type:"text",text:"+"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}},{id:"minus",name:"相减",shape:"round",category:"operator",draggable:!0,display:{padding:4},sections:[{type:"argument",datatype:"number"},{type:"text",text:"-"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}},{id:"divide",name:"相除",shape:"round",category:"operator",draggable:!0,display:{padding:4},sections:[{type:"argument",datatype:"number"},{type:"text",text:"/"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}},{id:"multiply",name:"相乘",shape:"round",category:"operator",draggable:!0,display:{padding:4},sections:[{type:"argument",datatype:"number"},{type:"text",text:"✖"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}},{id:"logicadd",name:"逻辑与",shape:"boolean",category:"operator",draggable:!0,display:{padding:{left:8,right:8,top:4,bottom:4}},sections:[{type:"argument",datatype:"boolean"},{type:"text",text:"与"},{type:"argument",datatype:"boolean"}],exports:{json:function(t){return{}}}},{id:"logicor",name:"逻辑或",shape:"boolean",category:"operator",draggable:!0,display:{padding:{left:8,right:8,top:4,bottom:4}},sections:[{type:"argument",datatype:"boolean"},{type:"text",text:"或"},{type:"argument",datatype:"boolean"}],exports:{json:function(t){return{}}}},{id:"greater",name:"大于",shape:"boolean",category:"operator",draggable:!0,display:{padding:{left:16,right:16,top:4,bottom:4}},sections:[{type:"argument",datatype:"number"},{type:"text",text:">"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}},{id:"less",name:"小于",shape:"boolean",category:"operator",draggable:!0,display:{padding:{left:16,right:16,top:4,bottom:4}},sections:[{type:"argument",datatype:"number"},{type:"text",text:"<"},{type:"argument",datatype:"number"}],exports:{json:function(t){return{}}}}],Ct=[];Ct=Ct.concat(_t);var Bt={name:"表达式",members:Ct},jt=[];jt=jt.concat([]);var $t={name:"控制",members:jt},Ot={name:"参数",members:[{id:"number",name:"数值",shape:"round",category:"argument",exports:{json:function(t){return{}}}},{id:"string",name:"字符串",shape:"round",category:"argument",exports:{json:function(t){return{}}}},{id:"boolean",name:"布尔值",shape:"boolean",category:"argument",background:{fill:"#389438"},exports:{json:function(t){return{}}}},{id:"enum",name:"枚举值",shape:"dropdown",category:"argument",values:[{value:-1,name:"空"}],exports:{json:function(t){return{}}}}]},Ht={internal:{name:"内部",display:"none",background:{stroke:"#000000",fill:"#000000",opacity:"0.2"}},argument:{name:"参数",display:"none",background:{stroke:"#333333",fill:"#FFFFFF",opacity:"1"}},sensing:{name:"感知",background:{stroke:"#2E8EB8",fill:"#5CB1D6",opacity:"1"}},motion:{name:"运动",background:{stroke:"#3373CC",fill:"#4C97FF",opacity:"1"}},event:{name:"事件",background:{stroke:"#CC9900",fill:"#FFBF00",opacity:"1"}},control:{name:"控制",background:{stroke:"#CF8B17",fill:"#FFAB19",opacity:"1"}},operator:{name:"运算",background:{stroke:"#389438",fill:"#59C059",opacity:"1"}},data:{name:"数据",background:{stroke:"#DB6E00",fill:"#FF8C1A",opacity:"1"}}},Pt={categories:Ht,args:Ot,blocks:{variant:ft,marker:mt,action:bt,event:wt,express:Bt,control:$t}};dt.setLevel("debug");var St=12,zt=16;function Wt(t){if(!V.isString(t)||""===t)return 0;var e=t.length*St,a=V.strByteLength(t)-t.length;return e+=a*(zt-St),e}function Nt(t){return Pt.categories?Pt.categories[t]:null}var Ft="http://www.w3.org/2000/svg",Mt={resize:"ycBlockEventResize",position:"ycBlockEventPosition",background:"ycBlockEventBackground"},Et={cap:function(t){var e=document.createElementNS(Ft,"path"),a=v()(e);t||(t={});var n=96,r=4,i=22,o=20,s=40,l={width:o+r+n,height:s+2*r,contentWidth:o,contentHeight:s,outerWidth:o+r+n,outerHeight:s+2*r+i},c=function(t,e){var a=!!t||!!e;t&&(l.contentWidth=Math.max(t-n-r,o)),e&&(l.contentHeight=Math.max(e-2*r,s)),a&&(l.width=l.outerWidth=l.contentWidth+r+n,l.height=l.contentHeight+2*r,l.outerHeight=l.height+i)};c(t.width,t.height);var d="`m 0,0 c 25,-22 71,-22 96,0 H ${ 96 + size.contentWidth } a 4,4 0 0,1 4,4 v ${size.contentHeight}  a 4,4 0 0,1 -4,4 H 48   c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 H 4 a 4,4 0 0,1 -4,-4 z`",u=new Function("size","return "+d);return a.attr("d",u(l)),t.stroke&&a.attr("stroke",t.stroke),t.fill&&a.attr("fill",t.fill),t.opacity&&a.attr("fill-opacity",t.opacity),a.addClass("ycBlockPath ycBlockBackground"+(t.classes?" "+t.classes:"")),a.on(Mt.resize,function(t,e){t.stopPropagation();var a="cap ".concat(Mt.resize," event: ");if(e){var n=v()(this),r={};e.width&&(V.isNumber(e.width)?r.width=e.width:dt.warn(a+"width is not number")),e.height&&(V.isNumber(e.height)?r.height=e.height:dt.warn(a+"height is not number")),c(r.width,r.height),n.attr("d",u(l)),n[0].__boundbox__=l}else dt.warn(a+"opt is null")}),a[0].__boundbox__=l,a},slot:function(t){var e=document.createElementNS(Ft,"path"),a=v()(e);t||(t={});var n=48,r=4,i=8,o=40,s=40,l={width:o+r+n,height:s+2*r,contentWidth:o,contentHeight:s,outerWidth:o+r+n,outerHeight:s+2*r+i},c=function(t,e){var a=!!t||!!e;t&&(l.contentWidth=Math.max(t-n-r,o)),e&&(l.contentHeight=Math.max(e-2*r,s)),a&&(l.width=l.outerWidth=l.contentWidth+r+n,l.height=l.contentHeight+2*r,l.outerHeight=l.height+i)};c(t.width,t.height);var d="`m 0,4 A 4,4 0 0,1 4,0 H 12 c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2 H ${ 48 + size.contentWidth } a 4,4 0 0,1 4,4 v ${ size.contentHeight } a 4,4 0 0,1 -4,4 H 48 c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2 H 4 a 4,4 0 0,1 -4,-4 z`",u=new Function("size","return "+d);return a.attr("d",u(l)),t.stroke&&a.attr("stroke",t.stroke),t.fill&&a.attr("fill",t.fill),t.opacity&&a.attr("fill-opacity",t.opacity),a.addClass("ycBlockPath ycBlockBackground"+(t.classes?" "+t.classes:"")),a.on(Mt.resize,function(t,e){t.stopPropagation();var a="slot ".concat(Mt.resize," event: ");if(e){var n=v()(this),r={};e.width&&(V.isNumber(e.width)?r.width=e.width:dt.warn(a+"width is not number")),e.height&&(V.isNumber(e.height)?r.height=e.height:dt.warn(a+"height is not number")),c(r.width,r.height),n.attr("d",u(l)),n[0].__boundbox__=l}else dt.warn(a+"opt is null")}),a[0].__boundbox__=l,a},roundRect:function(t){var e=document.createElementNS(Ft,"path"),a=v()(e),n=8,r=16;t||(t={});var i={width:n+2*r,height:2*r,radius:r,contentWidth:n,contentHeight:2*r,outerWidth:n+2*r,outerHeight:2*r},o=function(t,e){var a=!!t||!!e;e&&(i.radius=Math.max(e/2,r)),t&&(i.contentWidth=Math.max(t-2*i.radius,n)),a&&(i.width=i.outerWidth=i.contentWidth+2*i.radius,i.height=i.outerHeight=2*i.radius)};o(t.width,t.height);var s="`m 0,0 m ${size.radius},0 H ${size.radius + size.contentWidth} a ${size.radius} ${size.radius} 0 0 1 0 ${size.radius * 2} H ${size.radius} a ${size.radius} ${size.radius} 0 0 1 0 ${size.radius * -2} z`",l=new Function("size","return "+s);return a.attr("d",l(i)),t.stroke&&a.attr("stroke",t.stroke),t.fill&&a.attr("fill",t.fill),t.opacity&&a.attr("fill-opacity",t.opacity),a.addClass("ycBlockPath ycBlockBackground"+(t.classes?" "+t.classes:"")),a.on(Mt.resize,function(t,e){t.stopPropagation();var a="roundRect ".concat(Mt.resize," event: ");if(e){var n=v()(this),r={};e.width&&(V.isNumber(e.width)?r.width=e.width:dt.warn(a+"width is not number")),e.height&&(V.isNumber(e.height)?r.height=e.height:dt.warn(a+"height is not number")),o(r.width,r.height),n.attr("d",l(i)),n[0].__boundbox__=i}else dt.debug(a+"opt is null")}),a[0].__boundbox__=i,a},diamondRect:function(t){var e=document.createElementNS(Ft,"path"),a=v()(e),n=8,r=16;t||(t={});var i={width:n+2*r,height:2*r,side:r,contentWidth:n,contentHeight:2*r,outerWidth:n+2*r,outerHeight:2*r},o=function(t,e){var a=!!t||!!e;e&&(i.side=Math.max(e/2,r)),t&&(i.contentWidth=Math.max(t-2*i.side,n)),a&&(i.width=i.outerWidth=i.contentWidth+2*i.side,i.height=i.outerHeight=2*i.side)};o(t.width,t.height);var s="`m 0,0 m ${size.side},0 H ${size.side + size.contentWidth} l ${size.side} ${size.side} l ${-size.side} ${size.side} H ${size.side} l ${-size.side} ${-size.side} l ${size.side} ${-size.side} z`",l=new Function("size","return "+s);return a.attr("d",l(i)),t.stroke&&a.attr("stroke",t.stroke),t.fill&&a.attr("fill",t.fill),t.opacity&&a.attr("fill-opacity",t.opacity),a.addClass("ycBlockPath ycBlockBackground"+(t.classes?" "+t.classes:"")),a.on(Mt.resize,function(t,e){t.stopPropagation();var a="diamondRect ".concat(Mt.resize," event: ");if(e){var n=v()(this),r={};e.width&&(V.isNumber(e.width)?r.width=e.width:dt.warn(a+"width is not number")),e.height&&(V.isNumber(e.height)?r.height=e.height:dt.warn(a+"height is not number")),o(r.width,r.height),n.attr("d",l(i)),n[0].__boundbox__=i}else dt.debug(a+"opt is null")}),a[0].__boundbox__=i,a},markerPath:function(t){var e=document.createElementNS(Ft,"path"),a=v()(e);return a.attr("stroke",t.stroke),a.attr("fill",t.fill),a.attr("fill-opacity",t.opacity),a.addClass("ycBlockPath ycBlockBackground"+(t.classes?" "+t.classes:"")),a},text:function(t){var e=document.createElementNS(Ft,"text"),a=v()(e);return t||(t={}),a.addClass("ycBlockText"+(t.classes?" "+t.classes:"")),a.attr("text-anchor",t.anchor?t.anchor:"middle"),a.attr("dominant-baseline",t.baseline?t.baseline:"central"),a.attr("dy","0"),a.attr("x",t.x?t.x:0),a.attr("y",t.y?t.y:0),a.attr("transform","translate(".concat(t.translatex?t.translatex:0,", ").concat(t.translatey?t.translatey:0,")")),a.html(t.text?t.text:""),a.on(Mt.position,function(t,e){t.stopPropagation();var a="text ".concat(Mt.position," event: ");if(e){var n=v()(this);e.x&&(V.isNumber(e.x)?n.attr("x",e.x):dt.debug(a+"x is not number")),e.y&&(V.isNumber(e.y)?n.attr("y",e.y):dt.debug(a+"y is not number"));var r=0,i=0;V.isNumber(e.translatex)?r=e.translatex:dt.debug(a+"translatex is not number"),V.isNumber(e.translatey)?i=e.translatey:dt.debug(a+"translatey is not number"),n.attr("transform","translate(".concat(r,", ").concat(i,")"))}else dt.debug(a+"opt is null")}),a},group:function(t){var e=document.createElementNS(Ft,"g"),a=v()(e);return t.type&&a.attr("data-type",t.type),t.shape&&a.attr("data-shape",t.shape),t.category&&a.attr("data-category",t.category),!0===t.draggable&&a.addClass("ycBlockDraggable"),a.addClass(t.classes?" "+t.classes:""),a.on(Mt.position,function(t,e){t.stopPropagation();var a="arguGroup ".concat(Mt.position," event: ");if(e){var n=v()(this),r=0,i=0;V.isNumber(e.translatex)?r=e.translatex:dt.debug(a+"translatex is not number"),V.isNumber(e.translatey)?i=e.translatey:dt.debug(a+"translatey is not number"),n.attr("transform","translate(".concat(r,", ").concat(i,")"))}else dt.debug(a+"opt is null")}),a},arguGroup:function(t){var e=document.createElementNS(Ft,"g"),a=v()(e);return t.type&&a.attr("data-argument-type",t.id),t.shape&&a.attr("data-shape",t.shape),a.attr("transform","translate(".concat(t.translatex?t.translatex:0,", ").concat(t.translatey?t.translatey:0,")")),a.on(Mt.position,function(t,e){t.stopPropagation();var a="arguGroup ".concat(Mt.position," event: ");if(e){var n=v()(this),r=0,i=0;V.isNumber(e.translatex)?r=e.translatex:dt.debug(a+"translatex is not number"),V.isNumber(e.translatey)?i=e.translatey:dt.debug(a+"translatey is not number"),n.attr("transform","translate(".concat(r,", ").concat(i,")"))}else dt.debug(a+"opt is null")}).on(Mt.background,function(t,e){t.stopPropagation();var a=v()(this),n=a.children("path"),r="arguGroup ".concat(Mt.background," event: ");e?(e.stroke&&(V.isString(e.stroke)?n.attr("stroke",e.stroke):dt.debug(r+"stroke is not string")),e.fill&&(V.isString(e.fill)?n.attr("fill",e.stroke):dt.debug(r+"fill is not string")),e.opacity&&(V.isNumber(+e.opacity)?n.attr("fill-opacity",e.opacity):dt.debug(r+"opacity is not number"))):dt.debug(r+"opt is null")}),a},flyoutLabel:function(t){var e=document.createElementNS(Ft,"g"),a=v()(e);a.attr("display","block"),a.attr("transform","translate(".concat(t.translatex?t.translatex:0,", ").concat(t.translatey?t.translatey:0,")")),a.addClass("ycBlockFlyoutLabel"+(t.classes?" "+t.classes:""));var n=document.createElementNS(Ft,"rect"),r=v()(n);r.attr("rx","4"),r.attr("ry","4"),r.attr("width",t.width),r.attr("height",t.height),r.addClass("ycBlockFlyoutLabelBackground"),a.append(r);var i=document.createElementNS(Ft,"text"),o=v()(i);return o.attr("x","0"),o.attr("y",t.height/2),o.attr("dy","0"),o.attr("text-anchor","start"),o.attr("dominant-baseline","central"),o.addClass("ycBlockFlyoutLabelText"),o.html(t.text?t.text:""),a.append(o),a},editableText:function(t){var e=document.createElementNS(Ft,"g"),a=v()(e);a.attr("transform","translate(".concat(t.translatex?t.translatex:8,", ").concat(t.translatey?t.translatey:0,")")),a.addClass("ycBlockEditableText");var n=document.createElementNS(Ft,"text"),r=v()(n);return r.attr("x",t.x?t.x:0),r.attr("y",t.y?t.y:0),r.attr("text-anchor","middle"),r.attr("dominant-baseline","central"),r.attr("dy","0"),r.addClass("ycBlockText"),a.append(r),a.on(Mt.position,function(t,e){t.stopPropagation();var a="slot ".concat(Mt.position," event: ");if(e){var n=v()(this),r=0,i=0;V.isNumber(e.translatex)?r=e.translatex:dt.debug(a+"translatex is not number"),V.isNumber(e.translatey)?i=e.translatey:dt.debug(a+"translatey is not number"),n.attr("transform","translate(".concat(r,", ").concat(i,")"));var o=n.children("text");V.isNumber(e.x)?o.attr("x",e.x):dt.debug(a+"x is not number"),V.isNumber(e.y)?o.attr("y",e.y):dt.debug(a+"y is not number")}else dt.debug(a+"opt is null")}),a},image:function(t){var e=document.createElementNS(Ft,"g"),a=v()(e);a.attr("transform","translate(".concat(t.translatex?t.translatex:0,", ").concat(t.translatey?t.translatey:0,")"));var n=document.createElementNS(Ft,"image"),r=v()(n);return r.attr("height",(t.width?t.width:24)+"px"),r.attr("width",(t.height?t.height:24)+"px"),r.attr("xlink:href",""),n.href.baseVal=t.url,a.append(r),a.on(Mt.position,function(e,a){e.stopPropagation();var n="image ".concat(Mt.position," event: ");if(a){var r=v()(this),i=0,o=0;V.isNumber(a.translatex)?i=a.translatex:dt.debug(n+"translatex is not number"),V.isNumber(a.translatey)?o=a.translatey:dt.debug(n+"translatey is not number"),r.attr("transform","translate(".concat(i,", ").concat(o,")"));var s=r.children("image");V.isString(a.url)?s[0].href.baseVal=t.url:dt.debug(n+"url is not string")}else dt.debug(n+"opt is null")}),a}},Tt=function(){function t(e,a){Object(tt["a"])(this,t),this.uid=nt()(),this.proto=e,this.elem=null,this.prev=null,this.next=null,this.parent=null,this.children=[],this.state={},dt.debug("INSTANCE",a),this.update(a)}return Object(et["a"])(t,[{key:"element",value:function(){return this.elem||(this.elem=v()(this.proto.prototypeElement).clone(!0)),this.elem}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if(!e)for(var n=Object.entries(t),r=0;r<n.length;r++){var i=Object(Q["a"])(n[r],2),o=i[0],s=i[1];V.isDef(this.state[o])&&this.state[o]===s||a.push(o),this.state[o]=s}var l=this.element(),c={dom:l,proto:this.proto,state:this.state,modify:a};this.proto.adjust(c),a.length>0&&(a.indexOf("x")||a.indexOf("y"))&&this.updatePosition(l)}},{key:"updatePosition",value:function(t){t.trigger(Mt.position,[{translatex:V.isNumber(this.state.x)?this.state.x:0,translatey:V.isNumber(this.state.y)?this.state.y:0}])}}]),t}(),At=function(){function t(e){Object(tt["a"])(this,t),this.instances=[],this.def={display:{minContentWidth:8,minHeight:32,space:4},background:{},state:{contentWidth:8,contentHeight:32,width:8,height:32}};var a=Nt(e.category);a&&a.background&&Object.assign(this.def.background,a.background),v.a.extend(!0,this.def,e),this.prototypeElement=this.createElement(),this.prototypeElement&&this.prototypeElement.attr("data-block",this.def.id)}return Object(et["a"])(t,[{key:"padding",value:function(){var t={left:0,right:0,top:0,bottom:0};if(V.isDefAndNotNull(this.def.display.padding)){var e=this.def.display.padding;if(V.isNumber(e))for(var a=Object.keys(t),n=0;n<a.length;n++){var r=a[n];t[r]=e}else if(V.isObject(e))for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e[s]&&(t[s]=e[s])}}else"slot"===this.def.shape||"control"===this.def.shape?t.left=t.right=8:t.left=t.right=this.def.state.height/2;return t}},{key:"createElement",value:function(){return null}},{key:"adjust",value:function(t){V.isArray(t.modify)&&t.modify.length,t.dom.trigger(Mt.position,[{translatex:V.isNumber(t.state.x)?t.state.x:0,translatey:V.isNumber(t.state.y)?t.state.y:0}])}},{key:"instance",value:function(t){var e=Object.assign({},this.def.state,t),a=new Tt(this,e);return this.instances.push(a),a}}]),t}(),It=function(t){function e(t){return Object(tt["a"])(this,e),"boolean"===t.shape&&(t.display.minContentWidth=16),Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createElement",value:function(){var t=Et.arguGroup(this.def),e={contentWidth:this.def.state.width,height:this.def.state.height};Object.assign(e,this.def.background);var a=null;return"boolean"===this.def.shape?(this.def.state.value=!!this.def.value&&!!this.def.value,e.contentWidth=16,a=Et.diamondRect(e),t.append(a)):"dropdown"===this.def.shape?(this.def.state.currentIndex=this.def.currentIndex?parseInt(this.def.currentIndex):-1,this.def.state.values=this.def.values,a=Et.roundRect(e)):"number"===this.def.shape?(this.def.state.value=this.def.value?parseInt(this.def.value):0,a=Et.roundRect(e),t.append(a),t.append(Et.editableText({text:this.def.state.value}))):(this.def.state.value=this.def.value?this.def.value:"",a=Et.roundRect(e),t.append(a),t.append(Et.editableText({text:this.def.state.value}))),this.def.state.width=a[0].__boundbox__.width,this.def.state.height=a[0].__boundbox__.height,this.def.state.contentWidth=a[0].__boundbox__.contentWidth,this.def.state.contentHeight=a[0].__boundbox__.contentHeight,this.adjust({dom:t,proto:this,state:this.def.state}),t}},{key:"adjust",value:function(t){var e=t.proto.def,a=t.proto.padding();if("dropdown"===e.shape);else{var n="";"boolean"!==e.shape?n=""+t.state.value:e.display.minContentWidth=16;var r=Wt(n);t.state.contentWidth=r<e.display.minContentWidth?e.display.minContentWidth:r,t.state.width=t.state.contentWidth+a.left+a.right;var i=t.dom.children("path");i.trigger(Mt.resize,[{width:t.state.width,height:t.state.height}]),t.state.width=i[0].__boundbox__.width,t.state.height=i[0].__boundbox__.height,t.state.contentWidth=i[0].__boundbox__.contentWidth,t.state.contentHeight=i[0].__boundbox__.contentHeight;var o=t.dom.children("text");o.trigger(Mt.position,[{x:t.state.height/2+t.state.contentWidth/2,translatex:0,translatey:t.state.height/2}])}}},{key:"instance",value:function(t){var a=Object(K["a"])(Object(J["a"])(e.prototype),"instance",this).call(this,t);return a}}]),Object(U["a"])(e,t),e}(At),Dt=function(t){function e(t){return Object(tt["a"])(this,e),Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createElement",value:function(){var t=Et.group(this.def);return"insertmarker"===this.def.id&&t.addClass("ycBlockInsertionMarker"),t.append(Et.markerPath(this.def.background)),this.adjust({dom:t,proto:this,state:this.def.state}),t}}]),Object(U["a"])(e,t),e}(At),Lt=function(t){function e(t){return Object(tt["a"])(this,e),t.display.minHeight=40,t.state.height=40,Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createElement",value:function(){var t=Et.group(this.def),e={height:this.def.state.height};v.a.extend(e,this.def.background);var a=null;return a="boolean"===this.def.shape?Et.diamondRect(e):Et.roundRect(e),t.append(a),this.def.state.width=a[0].__boundbox__.width,this.def.state.height=a[0].__boundbox__.height,this.def.state.contentWidth=a[0].__boundbox__.contentWidth,this.def.state.contentHeight=a[0].__boundbox__.contentHeight,t.append(Et.text({text:this.def.text})),this.adjust({dom:t,proto:this,state:this.def.state}),t}},{key:"adjust",value:function(t){var e=t.proto.def,a=t.proto.padding(),n=Wt(e.text);t.state.contentWidth=n<e.display.minContentWidth?e.display.minContentWidth:n,"dropdown"===e.shape||(t.state.width=t.state.contentWidth+a.left+a.right);var r=t.dom.children("path");r.trigger(Mt.resize,[{width:t.state.width,height:t.state.height}]),t.state.width=r[0].__boundbox__.width,t.state.height=r[0].__boundbox__.height,t.state.contentWidth=r[0].__boundbox__.contentWidth,t.state.contentHeight=r[0].__boundbox__.contentHeight;var i=t.dom.children("text");i.trigger(Mt.position,[{x:a.left+t.state.contentWidth/2,y:0,translatex:0,translatey:t.state.height/2}])}}]),Object(U["a"])(e,t),e}(At),Gt=function(t){function e(t){return Object(tt["a"])(this,e),t.display.minHeight=40,t.state.height=40,Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createElement",value:function(){var t=this.createContainer();this.sections=[];var e=!0,a=!1,n=void 0;try{for(var r,i=this.def.sections.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,s=Object.assign({},o);this.sections.push(s);var l=this.createSection(s);l?(this.def.background&&this.def.background.stroke&&l.trigger(Mt.background,[{stroke:this.def.background.stroke}]),t.append(l)):dt.debug("block"+this.name+"createSection failed:"+o)}}catch(t){a=!0,n=t}finally{try{e||null==i.return||i.return()}finally{if(a)throw n}}return this.adjust({dom:t,proto:this,state:this.def.state}),t}},{key:"createSection",value:function(t){return"argument"===t.type?this.addArgument(t):"text"===t.type?(t.$elem=Et.text(t),t.$elem):"image"===t.type?(t.$elem=Et.image(t),t.$elem):void 0}},{key:"addArgument",value:function(t,e){if(t&&t.datatype){var a=this.def.__panel__.createBlockInstance(t.datatype,t.state);if(a)return t.instance=a,t.instance.element()}}},{key:"adjust",value:function(t){var e=t.proto.def,a=t.proto.padding(),n=t.proto.sections,r=e.display.space,i=a.left,o=20,s=!0,l=!1,c=void 0;try{for(var d,u=n.values()[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var h=d.value;if("argument"===h.type&&h.instance)i+=h.instance.state.width,o=Math.max(o,h.instance.state.height);else if("text"===h.type&&h.$elem){var f=Wt(h.text);i+=f}else if("image"===h.type&&h.$elem){var p=h.width?h.width:24;i+=p}i+=r}}catch(t){l=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(l)throw c}}i-=r,t.state.width=i+a.right,t.state.height=o+a.top+a.bottom;var g=t.dom.children("path");g.trigger(Mt.resize,[{width:t.state.width,height:t.state.height}]),t.state.width=g[0].__boundbox__.width,t.state.height=g[0].__boundbox__.height,t.state.contentWidth=g[0].__boundbox__.contentWidth,t.state.contentHeight=g[0].__boundbox__.contentHeight,i=a.left;var m=!0,y=!1,v=void 0;try{for(var b,x=n.values()[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var k=b.value,w=null;if("argument"===k.type&&k.instance)w=k.instance.element(),w.trigger(Mt.position,[{translatex:i,translatey:(t.state.height-k.instance.state.height)/2}]),i+=k.instance.state.width;else if("text"===k.type&&k.$elem){w=k.$elem;var _=Wt(k.text);w.trigger(Mt.position,[{x:_/2,y:-r/2,translatex:i,translatey:t.state.height/2}]),i+=_}else if("image"===k.type&&k.$elem){w=k.$elem;var C=k.width?k.width:24;w.trigger(Mt.position,[{translatex:i,translatey:(t.state.height-k.height)/2}]),i+=C}i+=r}}catch(t){y=!0,v=t}finally{try{m||null==x.return||x.return()}finally{if(y)throw v}}}},{key:"createContainer",value:function(){return null}},{key:"instance",value:function(t){var a=Object(K["a"])(Object(J["a"])(e.prototype),"instance",this).call(this,t);return a}}]),Object(U["a"])(e,t),e}(At),Rt=function(t){function e(t){return Object(tt["a"])(this,e),Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createContainer",value:function(){var t=Et.group(this.def),e=Object.assign({},this.def.background),a=null;return a="boolean"===this.def.shape?Et.diamondRect(e):Et.roundRect(e),t.append(a),this.def.state.width=a[0].__boundbox__.width,this.def.state.height=a[0].__boundbox__.height,this.def.state.contentWidth=a[0].__boundbox__.contentWidth,this.def.state.contentHeight=a[0].__boundbox__.contentHeight,t}}]),Object(U["a"])(e,t),e}(Gt),Yt=function(t){function e(t){return Object(tt["a"])(this,e),t.state.contentHeight=40,t.display.minContentHeight=40,Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createContainer",value:function(){var t=Et.group(this.def),e=Object.assign({},this.def.background),a=Et.cap(e);return t.append(a),this.def.state.width=a[0].__boundbox__.width,this.def.state.height=a[0].__boundbox__.height,this.def.state.contentWidth=a[0].__boundbox__.contentWidth,this.def.state.contentHeight=a[0].__boundbox__.contentHeight,t}},{key:"adjust",value:function(t){var e=t.proto.def,a=t.proto.padding(),n=t.proto.sections,r=e.display.space,i=a.left,o=20,s=!0,l=!1,c=void 0;try{for(var d,u=n.values()[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var h=d.value;if("argument"===h.type&&h.instance)i+=h.instance.state.width,o=Math.max(o,h.instance.state.height);else if("text"===h.type&&h.$elem){var f=Wt(h.text);i+=f}i+=r}}catch(t){l=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(l)throw c}}i-=r,t.state.width=i+a.right,t.state.height=o+a.top+a.bottom;var p=t.dom.children("path");p.trigger(Mt.resize,[{width:t.state.width,height:t.state.height}]),t.state.width=p[0].__boundbox__.width,t.state.height=p[0].__boundbox__.height,t.state.contentWidth=p[0].__boundbox__.contentWidth,t.state.contentHeight=p[0].__boundbox__.contentHeight,i=a.left;var g=!0,m=!1,y=void 0;try{for(var v,b=n.values()[Symbol.iterator]();!(g=(v=b.next()).done);g=!0){var x=v.value,k=null;if("argument"===x.type&&x.instance)k=x.instance.element(),k.trigger(Mt.position,[{translatex:i,translatey:(t.state.height-x.instance.state.height)/2}]),i+=x.instance.state.width;else if("text"===x.type&&x.$elem){k=x.$elem;var w=Wt(x.text);k.trigger(Mt.position,[{x:w/2,y:0,translatex:i,translatey:t.state.height/2}]),i+=w}i+=r}}catch(t){m=!0,y=t}finally{try{g||null==b.return||b.return()}finally{if(m)throw y}}}}]),Object(U["a"])(e,t),e}(Gt),Xt=function(t){function e(t){return Object(tt["a"])(this,e),t.state.contentHeight=40,t.display.minContentHeight=40,Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createContainer",value:function(){var t=Et.group(this.def),e=Object.assign({},this.def.background),a=Et.slot(e);return t.append(a),this.def.state.width=a[0].__boundbox__.width,this.def.state.height=a[0].__boundbox__.height,this.def.state.contentWidth=a[0].__boundbox__.contentWidth,this.def.state.contentHeight=a[0].__boundbox__.contentHeight,t}},{key:"adjust",value:function(t){var e=t.proto.def,a=t.proto.padding(),n=t.proto.sections,r=e.display.space,i=a.left,o=20,s=!0,l=!1,c=void 0;try{for(var d,u=n.values()[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var h=d.value;if("argument"===h.type&&h.instance)i+=h.instance.state.width,o=Math.max(o,h.instance.state.height);else if("text"===h.type&&h.$elem){var f=Wt(h.text);i+=f}i+=r}}catch(t){l=!0,c=t}finally{try{s||null==u.return||u.return()}finally{if(l)throw c}}i-=r,t.state.width=i+a.right,t.state.height=o+a.top+a.bottom;var p=t.dom.children("path");p.trigger(Mt.resize,[{width:t.state.width,height:t.state.height}]),t.state.width=p[0].__boundbox__.width,t.state.height=p[0].__boundbox__.height,t.state.contentWidth=p[0].__boundbox__.contentWidth,t.state.contentHeight=p[0].__boundbox__.contentHeight,i=a.left;var g=!0,m=!1,y=void 0;try{for(var v,b=n.values()[Symbol.iterator]();!(g=(v=b.next()).done);g=!0){var x=v.value,k=null;if("argument"===x.type&&x.instance)k=x.instance.element(),k.trigger(Mt.position,[{translatex:i,translatey:(t.state.height-x.instance.state.height)/2}]),i+=x.instance.state.width;else if("text"===x.type&&x.$elem){k=x.$elem;var w=Wt(x.text);k.trigger(Mt.position,[{x:w/2,y:0,translatex:i,translatey:t.state.height/2}]),i+=w}i+=r}}catch(t){m=!0,y=t}finally{try{g||null==b.return||b.return()}finally{if(m)throw y}}}}]),Object(U["a"])(e,t),e}(Gt),Zt=function(t){function e(t){return Object(tt["a"])(this,e),Object(q["a"])(this,Object(J["a"])(e).call(this,t))}return Object(et["a"])(e,[{key:"createContainer",value:function(){}}]),Object(U["a"])(e,t),e}(Gt);function Vt(t){if(!t.type)return null;var e=null;return"variant"===t.type?e=new Lt(t):"marker"===t.type?e=new Dt(t):"action"===t.type?e=new Xt(t):"event"===t.type?e=new Yt(t):"express"===t.type?e=new Rt(t):"control"===t.type?e=new Zt(t):"argument"===t.type&&(e=new It(t)),e}var Ut=function(){function t(e){var a=this;Object(tt["a"])(this,t),this.dom={},this.dom.$root=e,this.dom.$svg=e.find(".ycBlockSvg"),this.dom.$info=this.dom.$svg.find("#ycBlockInfo"),this.dom.$ws=this.dom.$svg.find(".ycBlockWorkspace"),this.dom.$canvas=this.dom.$ws.find(".ycBlockCanvas"),this.dom.$bubblecanvas=e.find(".ycBlockBubbleCanvas"),this.dom.$dragsurface=e.find(".ycBlockDragSurface"),this.dom.$dragcanvas=e.find(".ycBlockDragCanvas"),this.dom.$canvasList=[this.dom.$canvas,this.dom.$bubblecanvas,this.dom.$dragcanvas],this.dom.$flyout=e.find(".ycBlockFlyout"),this.dom.$flyoutws=this.dom.$flyout.find(".ycBlockWorkspace"),this.dom.$flyoutcanvas=this.dom.$flyoutws.find(".ycBlockCanvas"),this.dom.$flyoutbubblecanvas=this.dom.$flyoutws.find(".ycBlockBubbleCanvas"),this.dom.$flyoutcanvasList=[this.dom.$flyoutcanvas,this.dom.$flyoutbubblecanvas],this.dom.$menu=e.find(".ycBlockCategoryMenu"),this.marker=null,this.registries={},this.instances=[],this.grapPoint={x:0,y:0},this.lastPoint={x:0,y:0},this.mousePoint={x:0,y:0},this.$selected=null,this.currentZoomFactor=1,this.startDrag=!1,this.flyoutgrapPoint={x:0,y:0},this.flyoutlastPoint={x:0,y:0},this.$flyoutselected=null,this.flyoutstartDrag=!1,this.flyoutZoomFactor=.675,this.flyoutHeight=0,this.option={width:800,height:600,virtualWidth:1600,virtualHeight:1200,blocks:Pt};var n=this;this.dom.$svg.on("mousedown",function(){return a.lastPoint.x=event.pageX,a.lastPoint.y=event.pageY,a.startDrag=!0,!1}).on("mousemove",function(){var t=v()(this).offset().left,e=v()(this).offset().top;n.updateInfo({x:event.pageX-t,y:event.pageY-e});var a=event.pageX-n.lastPoint.x,r=event.pageY-n.lastPoint.y;if(!n.$selected&&n.startDrag){n.lastPoint.x=event.pageX,n.lastPoint.y=event.pageY;var i=n.dom.$canvas[0].getCTM(),o="translate("+(Number(i.e)+a)+","+(Number(i.f)+r)+") scale("+n.currentZoomFactor+")";n.setCanvasTransfrom(n.dom.$canvasList,o)}else if(n.$selected&&n.$selected.hasClass("ycBlockSelected")){if(!n.$selected.hasClass("ycBlockDragging")){var s=n.marker.element();s.insertAfter(n.$selected),n.dom.$dragsurface.css("display","block"),n.dom.$dragcanvas.append(n.$selected),n.$selected.addClass("ycBlockDragging")}n.dom.$dragsurface.attr("style","display: block; transform: translate3d("+a+"px,"+r+"px,0px)")}}).on("mouseup mouseleave",function(){if(n.startDrag=!1,n.$selected&&n.$selected.hasClass("ycBlockSelected")){if(n.$selected.hasClass("ycBlockDragging")){var t=n.marker.element();n.$selected.insertBefore(t),n.$selected.removeClass("ycBlockDragging"),t.remove();var e=n.dom.$dragsurface.css("transform").replace(/[^0-9\-,]/g,"").split(","),a=n.$selected[0].getCTM();n.$selected.attr("transform","translate("+(Number(e[4])+n.grapPoint.x)/Number(a.a)+","+(Number(e[5])+n.grapPoint.y)/Number(a.d)+")"),n.dom.$dragsurface.css("display","none;")}n.$selected.removeClass("ycBlockSelected"),n.$selected=null}}),this.dom.$flyout.on("mousedown",function(){return a.flyoutlastPoint.x=event.pageX,a.flyoutlastPoint.y=event.pageY,a.flyoutstartDrag=!0,!1}).on("mousemove",function(){var t=event.pageY-n.flyoutlastPoint.y;if(!n.$flyoutselected&&n.flyoutstartDrag){n.flyoutlastPoint.x=event.pageX,n.flyoutlastPoint.y=event.pageY;var e=n.dom.$flyoutcanvas[0].getCTM(),a=Number(e.f)+t;a>0&&(a=0);var r=Number(n.dom.$flyout.attr("height")),i=(r-n.flyoutHeight)*n.flyoutZoomFactor;a<i&&(a=i);var o="translate(0,"+a+") scale("+n.flyoutZoomFactor+")";n.setCanvasTransfrom(n.dom.$flyoutcanvasList,o)}else n.$flyoutselected&&n.$flyoutselected.hasClass("ycBlockSelected")}).on("mouseup mouseleave",function(){n.flyoutstartDrag=!1,n.$flyoutselected&&n.$flyoutselected.hasClass("ycBlockSelected")})}return Object(et["a"])(t,[{key:"updateInfo",value:function(t){this.mousePoint.x=t.x,this.mousePoint.y=t.y,this.dom.$info.html("X: "+t.x+"  Y: "+t.y)}},{key:"setCanvasTransfrom",value:function(t,e){t.forEach(function(t){t.attr("transform",e)})}},{key:"setOption",value:function(t){v.a.extend(!0,this.option,t);for(var e=this.registries,a=this.option.blocks.blocks,n=this.option.blocks.args,r=this.option.blocks.categories,i=Object.values(r),o=0;o<i.length;o++){var s=i[o];s.blocks=[]}var l=!0,c=!1,d=void 0;try{for(var u,h=n.members.values()[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;e[f.id]&&dt.debug("argument registered repeated: "+f.id),e[f.id]=Vt(Object.assign({type:"argument",__panel__:this,display:{},background:{},state:{}},f)),e[f.id]?dt.debug("argument registered successed: "+f.id):dt.debug("argument registered failed: "+f.id)}}catch(t){c=!0,d=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw d}}for(var p=Object.entries(a),g=0;g<p.length;g++){var m=Object(Q["a"])(p[g],2),y=m[0],b=m[1],x=!0,k=!1,w=void 0;try{for(var _,C=b.members.values()[Symbol.iterator]();!(x=(_=C.next()).done);x=!0){var B=_.value;e[B.id]&&dt.debug("block registered repeated: "+B.id),e[B.id]=Vt(Object.assign({type:y,__panel__:this,display:{},background:{},state:{}},B)),e[B.id]?(r[B.category].blocks.push(B.id),dt.debug("block registered successed: "+B.id)):dt.debug("block registered failed: "+B.id)}}catch(t){k=!0,w=t}finally{try{x||null==C.return||C.return()}finally{if(k)throw w}}}this.prepare()}},{key:"prepare",value:function(){this.marker=this.createBlockInstance("insertmarker"),this.initCategoryToolbox()}},{key:"initCategoryToolbox",value:function(){var t=this.option.blocks.categories,e=this.dom,a=this.registries;function n(e){var a=t[e];if(a){var n=v()('<div class="ycBlockCategoryMenuRow"></div>'),r=v()('<div class="ycBlockCategoryMenuItem" data-id="'.concat(e,'"></div>'));return r.append(v()('<div class="ycBlockCategoryItemBubble" style="background-color: '.concat(a.background.fill,"; border-color: ").concat(a.background.stroke,';"></div>'))),r.append(v()('<div class="ycBlockCategoryMenuItemLabel">'.concat(a.name,"</div>"))),n.append(r),r.on("click",function(){dt.debug("click ----- "+v()(this).data("id"))}),n}dt.debug("category can not found: "+e)}var r=12,i=64;v.a.each(t,function(o,s){if(!s.display||"none"!==s.display){var l=n(o);t[o].$menuitem=l,e.$menu.append(l);var c=Wt(s.name)+16,d=Et.flyoutLabel({text:s.name,width:c,height:40,translatex:20,translatey:r});t[o].$flyoutlable=d,e.$flyoutcanvas.append(d),r+=i,s.blocks&&v.a.each(s.blocks,function(t,n){var o=a[n];if(o&&o.prototypeElement){var s=v()(o.prototypeElement).clone(!0);s.attr("transform","translate(36, ".concat(r,")")),e.$flyoutcanvas.append(s),r+=i}else dt.debug("block registry is corrupted:"+n)})}}),this.flyoutHeight=r}},{key:"createBlockInstance",value:function(t,e){if(this.hasRegistered(t)){var a=this.registries[t],n=a.instance(e);return this.instances.push(n),n}dt.warn("block is unregistered: "+t)}},{key:"addBlock",value:function(t,e){if(t&&t.type){var a=this.createBlockInstance(t.type,t.state);if(a){var n=a.element(),r=this,i=this.dom;n.on("mousedown",function(){r.$selected=v()(this);var t=this.getCTM(),e=i.$canvas[0].getCTM();return r.lastPoint.x=event.pageX,r.lastPoint.y=event.pageY,r.grapPoint.x=Number(t.e)-Number(e.e),r.grapPoint.y=Number(t.f)-Number(e.f),r.$selected.addClass("ycBlockSelected"),!1}).on("mouseup",function(){}),e?e.append(a.element()):this.dom.$canvas.append(a.element())}}}},{key:"addBlocks",value:function(t){if(V.isArray(t)){var e=this;v.a.each(t,function(t,a){e.addBlock(a)})}else V.isObject(t)&&this.addBlock(t)}},{key:"findBlock",value:function(t){}},{key:"findBlocksByType",value:function(t){}},{key:"removeBlocks",value:function(t){}},{key:"removeBlocksByTypes",value:function(t){}},{key:"registerBlock",value:function(t){}},{key:"unregisterBlock",value:function(t){}},{key:"hasRegistered",value:function(t){return!(!this.registries.hasOwnProperty(t)||!this.registries[t])}}]),t}(),qt={init:function(t,e){if(t)return new Ut(t);e&&e("dom is invalid")},block:function(t){}},Jt=qt,Kt=null,Qt={name:"Scratch",props:["width","height","virtual-width","virtual-height","flex"],data:function(){return{id:"scratch",size:{width:800,height:600,virtualWidth:1600,virtualHeight:1200},flyout:{width:250}}},computed:{},created:function(){void 0!=this.width&&(this.size.width=parseInt(this.width)),void 0!=this.height&&(this.size.height=parseInt(this.height)),void 0!=this["virtual-width"]&&(this.size.virtualWidth=parseInt(this["virtual-width"])),void 0!=this["virtual-height"]&&(this.size.virtualHeight=parseInt(this["virtual-height"]))},mounted:function(){var t=this;Kt=Jt.init(v()(t.$el));var e=parseInt(t.flex);if(1===e){var a=function(){var e=v()(t.$el);t.size.width=e[0].clientWidth,t.size.height=e[0].clientHeight};window.onresize=function(){a()},a()}console.log(Kt),Kt.setOption({}),Kt.addBlock({type:"locationx",state:{x:100,y:200}}),Kt.addBlock({type:"locationy",state:{x:300,y:200}}),Kt.addBlock({type:"add",state:{x:400,y:500}}),Kt.addBlock({type:"move",state:{x:300,y:300}})},methods:{}},te=Qt,ee=(a("1068"),Object(u["a"])(te,R,Y,!1,null,null,null));ee.options.__file="Scratch.vue";var ae=ee.exports,ne={data:function(){return{}},components:{Scratch:ae}},re=ne,ie=(a("5ea6"),Object(u["a"])(re,L,G,!1,null,"687fdf66",null));ie.options.__file="ScriptEditor.vue";var oe=ie.exports;n["default"].use(p["a"]);var se=new p["a"]({routes:[{path:"/",name:"home",component:$},{path:"/nomview",name:"nomview",component:D},{path:"/scripteditor",name:"scripteditor",component:oe},{path:"/about",name:"about",component:function(){return a.e("chunk-2d22d746").then(a.bind(null,"f820"))}}]}),le=a("2f62");n["default"].use(le["a"]);var ce=new le["a"].Store({state:{},mutations:{},actions:{}});n["default"].config.productionTip=!1,n["default"].use(i.a),new n["default"]({router:se,store:ce,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("2856"),r=a.n(n);r.a},"5ea6":function(t,e,a){"use strict";var n=a("3f49"),r=a.n(n);r.a},8180:function(t,e,a){t.exports=a.p+"img/repeat.faeda723.svg"},"8a0e":function(t,e,a){t.exports=a.p+"img/zoom-in.db8254dc.svg"},"8f59":function(t,e,a){},"997f":function(t,e,a){},"9f83":function(t,e,a){t.exports=a.p+"img/zoom-out.6dcc03cf.svg"},b13e:function(t,e,a){t.exports=a.p+"img/green-flag.6a025d28.svg"},cccb:function(t,e,a){"use strict";var n=a("8f59"),r=a.n(n);r.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},d36d:function(t,e,a){t.exports=a.p+"img/zoom-reset.c70243f2.svg"},dd4f:function(t,e,a){},ef37:function(t,e,a){"use strict";var n=a("997f"),r=a.n(n);r.a}});
//# sourceMappingURL=app.d6158451.js.map